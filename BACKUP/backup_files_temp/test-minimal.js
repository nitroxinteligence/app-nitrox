const { createClient } = require("@supabase/supabase-js"); const SUPABASE_URL = "https://dkvqjisxtdlrdgseiooq.supabase.co"; const SUPABASE_SERVICE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrdnFqaXN4dGRscmRnc2Vpb29xIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczNzg2MDY5NSwiZXhwIjoyMDUzNDM2Njk1fQ.kFV65mUt9ljbP9sFaaKQ7JlzL5aiEf-ZOsgdmOk1Lqo"; async function testMinimalInsert() { console.log("Testing minimal record insertion"); const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_KEY); const testRecord = { Model: "gpt-3.5-turbo", prompt_tokens: 10, completion_tokens: 20, total_tokens: 30, estimated_cost: 0.0001, request_id: `test-${Date.now()}`, timestamp: new Date().toISOString(), }; try { const { data, error } = await supabase.from("openai_usage").insert([testRecord]); if (error) { console.error("Error inserting record:", error); } else { console.log("Record inserted successfully!"); } } catch (e) { console.error("Exception:", e); } } testMinimalInsert().catch(console.error);
